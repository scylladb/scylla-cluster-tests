test_duration: 420

latte_schema_parameters:
  lwt: 'true'
  cdc: 'false'
  mv: 'false'
  ks_name: 'lwt_keyspace'
  table_name: 'lwt_table'

prepare_write_cmd:
  - >-
    latte run -f write_to_table -P rows_per_partition=1000 --rate 2500 --duration=5000000 --start-cycle 0 --tag write-1
    data_dir/latte/tablet_split_merge_load.rn

  - >-
    latte run -f write_to_table -P rows_per_partition=1000 --rate 2500 --duration=5000000 --start-cycle 5000001 --tag write-2
    data_dir/latte/tablet_split_merge_load.rn

stress_cmd:
  - >-
    latte run -f update_first_part_of_table --serial-consistency=LOCAL_SERIAL --threads=1 --rate=500 --concurrency=900 --duration=360m --tag update-first-part
    data_dir/latte/tablet_split_merge_load.rn

  - >-
    latte run -f update_second_part_of_table --serial-consistency=LOCAL_SERIAL --threads=1 --rate=500 --concurrency=900 --duration=360m --tag update-second-part
    data_dir/latte/tablet_split_merge_load.rn

  - >-
    latte run -f read_from_table --consistency=LOCAL_SERIAL --threads=1 --rate=800 --concurrency=900 --duration=360m --tag read-from-table
    data_dir/latte/tablet_split_merge_load.rn

  - >-
    latte run -f delete_partition -P delete_pct=50 --rate 20  --concurrency=10 --duration=360m --tag delete-partition
    data_dir/latte/tablet_split_merge_load.rn

n_db_nodes: 6
simulated_racks: 3
n_loaders: 2
round_robin: true

instance_type_db: 'i4i.2xlarge'
gce_instance_type_db: 'n2-highmem-8'
gce_n_local_ssd_disk_db: 8

nemesis_class_name: 'SisyphusMonkey'
nemesis_selector: ["topology_changes", "schema_changes and not disruptive"]
nemesis_seed: '021'
nemesis_during_prepare: false
space_node_threshold: 64424

user_prefix: 'longevity-lwt-24h'

use_preinstalled_scylla: true

append_scylla_args: '--logger-log-level table=debug'
