test_duration: 840

prepare_write_cmd:
  - >-
    bin/ycsb load dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000 -p fieldcount=10 -p fieldlength=512
    -p insertorder=hashed -p insertstart=0 -p insertcount=2000000 -p operationcount=2000000

  - >-
    bin/ycsb load dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000 -p fieldcount=10 -p fieldlength=512
    -p insertorder=hashed -p insertstart=2000000 -p insertcount=2000000 -p operationcount=2000000

  - >-
    bin/ycsb load dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000 -p fieldcount=10 -p fieldlength=512
    -p insertorder=hashed -p insertstart=4000000 -p insertcount=2000000 -p operationcount=2000000

  - >-
    bin/ycsb load dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000 -p fieldcount=10 -p fieldlength=512
    -p insertorder=hashed -p insertstart=6000000 -p insertcount=2000000 -p operationcount=2000000

  - >-
    bin/ycsb load dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000 -p fieldcount=10 -p fieldlength=512
    -p insertorder=hashed -p insertstart=8000000 -p insertcount=2000000 -p operationcount=2000000

  - >-
    bin/ycsb load dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000 -p fieldcount=10 -p fieldlength=512
    -p insertorder=hashed -p insertstart=10000000 -p insertcount=2000000 -p operationcount=2000000

  - >-
    bin/ycsb load dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000 -p fieldcount=10 -p fieldlength=512
    -p insertorder=hashed -p insertstart=12000000 -p insertcount=2000000 -p operationcount=2000000

  - >-
    bin/ycsb load dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000 -p fieldcount=10 -p fieldlength=512
    -p insertorder=hashed -p insertstart=14000000 -p insertcount=2000000 -p operationcount=2000000

  - >-
    bin/ycsb load dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000 -p fieldcount=10 -p fieldlength=512
    -p insertorder=hashed -p insertstart=16000000 -p insertcount=2000000 -p operationcount=2000000

stress_cmd_w: >-2
  bin/ycsb run dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000
  -p readproportion=0 -p updateproportion=1 -p scanproportion=0 -p insertproportion=0 -p requestdistribution=uniform -p operationcount=0
  -p fieldcount=10 -p fieldlength=512

stress_cmd_r: >-2
  bin/ycsb run dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000
  -p readproportion=1 -p updateproportion=0 -p scanproportion=0 -p insertproportion=0 -p requestdistribution=uniform -p operationcount=0
  -p fieldcount=10 -p fieldlength=512

stress_cmd_m: >-2
  bin/ycsb run dynamodb -P workloads/workloada -threads 100 -p recordcount=18000000
  -p readproportion=0.5 -p updateproportion=0.5 -p scanproportion=0 -p insertproportion=0 -p requestdistribution=uniform -p operationcount=0
  -p fieldcount=10 -p fieldlength=512


n_db_nodes: 3
n_loaders: 9
n_monitor_nodes: 1

instance_type_loader: 'c7i.2xlarge'
instance_type_monitor: 't3.small'
instance_type_db: 'i3.4xlarge'

stress_multiplier: 1
stress_duration: 120
prepare_stress_duration: 20
alternator_write_isolation: 'forbid'
alternator_port: 8080
dynamodb_primarykey_type: HASH_AND_RANGE

user_prefix: 'perf-alternator-latency'
space_node_threshold: 644245094

use_hdrhistogram: true
alternator_stress_rate: 60000
alternator_write_always_lwt_stress_rate: 10000

round_robin: true
append_scylla_args: '--blocked-reactor-notify-ms 5 --abort-on-lsa-bad-alloc 1 --abort-on-seastar-bad-alloc --abort-on-internal-error 1 --abort-on-ebadf 1'
backtrace_decoding: true
backtrace_stall_decoding: false

store_perf_results: true
email_recipients: [] # TODO: Re-enable email notifications by setting to ['alternator-perf-results@scylladb.com'] once the email template issue is resolved.


latency_decorator_error_thresholds:
  write:
    unthrottled:
      P90 write:
        fixed_limit: 99999999
      P99 write:
        fixed_limit: 99999999
    default:
      P90 write:
        fixed_limit: 3
      P99 write:
        fixed_limit: 5
  read:
    unthrottled:
      P90 read:
        fixed_limit: 99999999
      P99 read:
        fixed_limit: 99999999
    default:
      P90 read:
        fixed_limit: 3
      P99 read:
        fixed_limit: 5
  mixed:
    unthrottled:
      P90 read:
        fixed_limit: 99999999
      P99 read:
        fixed_limit: 99999999
      P90 write:
        fixed_limit: 99999999
      P99 write:
        fixed_limit: 99999999
    default:
      P90 write:
        fixed_limit: 5
      P90 read:
          fixed_limit: 5
      P99 write:
          fixed_limit: 8
      P99 read:
          fixed_limit: 8
