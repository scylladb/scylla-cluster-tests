### DML ###

# Keyspace Name
keyspace: testing_keyspaces

# The CQL for creating a keyspace (optional if it already exists)
keyspace_definition: |
  CREATE KEYSPACE testing_keyspaces WITH replication = {'class': 'NetworkTopologyStrategy', 'replication_factor': 3} AND durable_writes = true;

# Table name
table: ${table_name}

# The CQL for creating a table you wish to stress (optional if it already exists)
table_definition: |
  CREATE TABLE testing_keyspaces.${table_name} (
      key1 bigint,
      key2 text,
      clustering1 bigint,
      clustering2 timeuuid,
      column1 text,
      column2 int, PRIMARY KEY ((key1, key2), clustering1, clustering2)
  ) WITH bloom_filter_fp_chance = 0.01
      AND caching = {'keys': 'ALL', 'rows_per_partition': 'ALL'}
      AND comment = ''
      AND compaction = {'class': 'SizeTieredCompactionStrategy'}
      AND compression = {}
      AND crc_check_chance = 1.0
      AND dclocal_read_repair_chance = 0.1
      AND default_time_to_live = 0
      AND gc_grace_seconds = 864000
      AND max_index_interval = 2048
      AND memtable_flush_period_in_ms = 0
      AND min_index_interval = 128
      AND read_repair_chance = 0.0
      AND speculative_retry = '99.0PERCENTILE';


# extra_definitions:
#   - CREATE INDEX IF NOT EXISTS ${table_name}_field4_${table_name} ON feeds.${table_name} (field4);

# ### Column Distribution Specifications ###

# ### Batch Ratio Distribution Specifications ###
# insert:
#   partitions: fixed(1)
#   select:    fixed(1)/1000
#   batchtype: UNLOGGED

# #
# # A list of queries you wish to run against the schema
# #
# queries:
#    read1:
#       cql: SELECT * FROM feeds.${table_name} WHERE field1 = ?
#       fields: samerow

# Run stress
# cassandra-stress user profile={} cl=QUORUM 'ops(insert=1, read1=5)' duration={} -rate threads=2 -errors ignore

# customer wish (different than what we are using!)
# "INSERT INTO short  (k,time,data) values (?,?,?) USING TTL ?"
# "SELECT * FROM short WHERE name = ? AND time >= ? AND time < ?"
